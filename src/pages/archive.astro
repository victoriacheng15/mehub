---
import PostDate from "@/components/PostDate";
import BaseLayout from "@/layouts/BaseLayout";
import { archivedPostsByYear, archivedYears } from "@/utils";

const currentYear = new Date().getFullYear();
---

<BaseLayout title="Archive" description="A collection of my archived posts.">
	<h1 class="text-secondary-300 mb-8 text-4xl font-bold">Archive</h1>
	{
		archivedYears.map((year) =>
			Number(year) === currentYear ? (
				<details open class="mb-4">
					<summary class="text-secondary-300 mb-2 text-xl">
						{year} - {archivedPostsByYear[year].length} posts
					</summary>
					<ul class="space-y-4">
						{archivedPostsByYear[year].map((post) => (
							<li class="flex items-baseline gap-4">
								<span class="whitespace-nowrap">
									<PostDate date={post.data.date} />
								</span>
								<a
									href={`/blog/${post.id}`}
									class="hover:text-secondary-200 duration-300 ease-in-out"
								>
									{post.data.title}
								</a>
							</li>
						))}
					</ul>
				</details>
			) : (
				<details class="mb-4">
					<summary class="text-secondary-300 mb-2 text-xl">
						{year} - {archivedPostsByYear[year].length} posts
					</summary>
					<ul class="space-y-4">
						{archivedPostsByYear[year].map((post) => (
							<li class="flex items-baseline gap-4">
								<span class="whitespace-nowrap">
									<PostDate date={post.data.date} />
								</span>
								<a
									href={`/blog/${post.id}`}
									class="hover:text-secondary-200 duration-300 ease-in-out"
								>
									{post.data.title}
								</a>
							</li>
						))}
					</ul>
				</details>
			),
		)
	}
</BaseLayout>
