---
import BaseLayout from "@/layouts/BaseLayout";
import { getAllPosts, getAllTags, getPostsByTag } from "@/utils";

const posts = await getAllPosts();
const tags = getAllTags(posts);
const tagCounts = tags
	.map((tag) => ({
		name: tag,
		count: getPostsByTag(posts, tag).length,
	}))
	.sort((a, b) => b.count - a.count);
---

<BaseLayout title="Tags" description="Explore a collection of posts categorized by topics.">
	<h1>Tags</h1>
	<div class="grid grid-cols-1 gap-4 md:grid-cols-2">
		{
			tagCounts.map(({ name, count }) => (
				<a href={`/tags/${name}`} class="card">
					<div class="flex items-center justify-between">
						<span class="text-lg font-medium">#{name}</span>
						<span class="text-sm">{count} posts</span>
					</div>
				</a>
			))
		}
	</div>
</BaseLayout>
